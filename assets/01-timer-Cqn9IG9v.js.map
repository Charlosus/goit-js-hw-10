{"version":3,"file":"01-timer-Cqn9IG9v.js","sources":["../../src/01-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nlet userSelectedDate;\r\nconst daysEle = document.querySelector(\"span[data-days]\");\r\nconst hoursEle = document.querySelector(\"span[data-hours]\");\r\nconst minutesEle = document.querySelector(\"span[data-minutes]\");\r\nconst secondsEle = document.querySelector(\"span[data-seconds]\");\r\nconst datepicker = document.querySelector(\"#datatime-picker\");\r\n\r\nconst button = document.querySelector('button[data-start]')\r\nbutton.disabled = true;\r\n\r\nconst datapickerOptions = {\r\n    enableTime: true,\r\n    time_24hr: true,\r\n    defaultDate: new Date(),\r\n    minuteIncrement: 1,\r\n    onOpen() { // to disable button if user didnt click it and want to pick another date\r\n        button.disabled = true\r\n    },\r\n    onClose(selectedDates) {\r\n        userSelectedDate = selectedDates[0];\r\n        const diff = userSelectedDate - new Date();\r\n        diff > 0 ? button.disabled = false : window.alert(\"Please pick date in future\");        \r\n    },\r\n};\r\n\r\nconst fp = flatpickr(datepicker, datapickerOptions);\r\n\r\nlet timerId = null\r\nbutton.addEventListener(\"click\", startCountdown)\r\n\r\nconst calcDiff = () => {\r\n    const currentDate = new Date();\r\n    const currentDiff = userSelectedDate - currentDate\r\n    return currentDiff\r\n}\r\n\r\nfunction convertMs(ms) { // outside code from task\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\nconst addingZeroIfLessThenDobleDigits = (value) => {\r\n    return String(value).padStart(2, \"0\")\r\n}\r\n\r\nfunction startCountdown() {\r\n  if (timerId !== null) {   \r\n    clearInterval(timerId);\r\n  }\r\n\r\n  timerId = setInterval(() => {\r\n    const diff = calcDiff();\r\n\r\n    if (diff <= 0) {\r\n      clearInterval(timerId);\r\n      return;\r\n    }\r\n\r\n    const { days, hours, minutes, seconds } = convertMs(diff);\r\n\r\n    daysEle.textContent = addingZeroIfLessThenDobleDigits(days);\r\n    hoursEle.textContent = addingZeroIfLessThenDobleDigits(hours);\r\n    minutesEle.textContent = addingZeroIfLessThenDobleDigits(minutes);\r\n    secondsEle.textContent = addingZeroIfLessThenDobleDigits(seconds);\r\n  }, 1000);\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":["userSelectedDate","daysEle","hoursEle","minutesEle","secondsEle","datepicker","button","datapickerOptions","selectedDates","flatpickr","timerId","startCountdown","calcDiff","convertMs","ms","days","hours","minutes","seconds","addingZeroIfLessThenDobleDigits","value","diff"],"mappings":"yCAEA,IAAIA,EACJ,MAAMC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,kBAAkB,EAEtDC,EAAS,SAAS,cAAc,oBAAoB,EAC1DA,EAAO,SAAW,GAElB,MAAMC,EAAoB,CACtB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAS,CACLD,EAAO,SAAW,EACrB,EACD,QAAQE,EAAe,CACnBR,EAAmBQ,EAAc,CAAC,EACrBR,EAAmB,IAAI,KAC7B,EAAIM,EAAO,SAAW,GAAQ,OAAO,MAAM,4BAA4B,CACjF,CACL,EAEWG,EAAUJ,EAAYE,CAAiB,EAElD,IAAIG,EAAU,KACdJ,EAAO,iBAAiB,QAASK,CAAc,EAE/C,MAAMC,EAAW,IAEOZ,EADA,IAAI,KAK5B,SAASa,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,MAAMC,EAAmCC,GAC9B,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAGxC,SAAST,GAAiB,CACpBD,IAAY,MACd,cAAcA,CAAO,EAGvBA,EAAU,YAAY,IAAM,CAC1B,MAAMW,EAAOT,IAEb,GAAIS,GAAQ,EAAG,CACb,cAAcX,CAAO,EACrB,MACD,CAED,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUQ,CAAI,EAExDpB,EAAQ,YAAckB,EAAgCJ,CAAI,EAC1Db,EAAS,YAAciB,EAAgCH,CAAK,EAC5Db,EAAW,YAAcgB,EAAgCF,CAAO,EAChEb,EAAW,YAAce,EAAgCD,CAAO,CACjE,EAAE,GAAI,CACT"}